---
import Card from '../components/Card.astro';
import Table from '../components/Table.astro';
import ContentLayout from '../layouts/ContentLayout.astro';

const anomalyFiles = import.meta.glob('../content/anomalies/*.md', { eager: true });
const anomalies = Object.values(anomalyFiles);
---

<ContentLayout title="Eidolon Capital Intranet - Anomalies">
  <h1>Anomaly Reports</h1>
  <h2>Active Anomalies ({anomalies.length})</h2>

  <div class="grid">
    {anomalies.map((anomaly) => (
      <Card title={anomaly.frontmatter.title}>
        <Table>
          <tbody>
            <tr>
              <td><strong>Anomaly ID:</strong></td>
              <td>{anomaly.frontmatter.anomalyId}</td>
            </tr>
            <tr>
              <td><strong>Classification:</strong></td>
              <td>{anomaly.frontmatter.classification}</td>
            </tr>
            <tr>
              <td><strong>Status:</strong></td>
              <td>{anomaly.frontmatter.status}</td>
            </tr>
            <tr>
              <td><strong>Discovery Date:</strong></td>
              <td>{anomaly.frontmatter.discoveryDate}</td>
            </tr>
            <tr>
              <td><strong>Location:</strong></td>
              <td>{anomaly.frontmatter.location}</td>
            </tr>
          </tbody>
        </Table>
        <a href={`/anomalies/${anomaly.frontmatter.anomalyId.toLowerCase()}`} slot="bottom">
          <button>View Full Report</button>
        </a>
      </Card>
    ))}
  </div>

  <hr>
</ContentLayout>
