---
import Table from '../../components/Table.astro';
import ContentLayout from '../../layouts/ContentLayout.astro';

export async function getStaticPaths() {
  const anomalyFiles = import.meta.glob('../../content/anomalies/*.md', { eager: true });
  const anomalies = Object.values(anomalyFiles);

  return anomalies.map((anomaly) => ({
    params: { id: anomaly.frontmatter.anomalyId.toLowerCase() },
    props: { anomaly }
  }));
}

const { anomaly } = Astro.props;
const { Content, frontmatter } = anomaly;
---

<ContentLayout title={`Eidolon Capital Intranet - Anomaly - ${frontmatter.title}`}>
  <h2>{frontmatter.title}</h2>

  <Table>
    <tr>
      <td><strong>Anomaly ID:</strong></td>
      <td>{frontmatter.anomalyId}</td>
    </tr>
    <tr>
      <td><strong>Classification:</strong></td>
      <td>{frontmatter.classification}</td>
    </tr>
    <tr>
      <td><strong>Status:</strong></td>
      <td>{frontmatter.status}</td>
    </tr>
    <tr>
      <td><strong>Discovery Date:</strong></td>
      <td>{frontmatter.discoveryDate}</td>
    </tr>
    <tr>
      <td><strong>Location:</strong></td>
      <td>{frontmatter.location}</td>
    </tr>
  </Table>

  <hr>

  <div class="field-border">
    <article>
      <Content />
    </article>
  </div>

  <hr>

  <a href="/anomalies">
    <button>‚Üê Back to Reports</button>
  </a>
</ContentLayout>
