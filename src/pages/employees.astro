---
import { getCollection } from 'astro:content';
import ContentLayout from '../layouts/ContentLayout.astro';
import EmployeesListing from '../components/EmployeesListing';

const employees = await getCollection('employees');
const employeesData = employees.map(emp => ({
  id: emp.data.id,
  name: emp.data.name,
  position: emp.data.position,
  department: emp.data.department,
}));
---

<ContentLayout title="Eidolon Capital Intranet - Employees">
  <h1>Employee Directory</h1>

  <EmployeesListing employees={employeesData} client:load />
</ContentLayout>
