---
import Card from '../components/Card.astro';
import Table from '../components/Table.astro';
import ContentLayout from '../layouts/ContentLayout.astro';

const employeeFiles = import.meta.glob('../content/employees/*.md', { eager: true });
const employees = Object.values(employeeFiles);
---

<ContentLayout title="Eidolon Capital Intranet - Employees">
  <h1>Employee Directory</h1>
  <h2>Active Personnel ({employees.length})</h2>

  <div class="grid">
    {employees.map((employee) => (
      <Card title={employee.frontmatter.name}>
        <Table>
          <tbody>
            <tr>
              <td><strong>Position:</strong></td>
              <td>{employee.frontmatter.position}</td>
            </tr>
            <tr>
              <td><strong>Department:</strong></td>
              <td>{employee.frontmatter.department}</td>
            </tr>
            <tr>
              <td><strong>ID:</strong></td>
              <td>{employee.frontmatter.employeeId}</td>
            </tr>
          </tbody>
        </Table>
        <a href={`/employees/${employee.frontmatter.employeeId.toLowerCase()}`} slot="bottom">
          <button>View Profile</button>
        </a>
      </Card>
    ))}
  </div>
</ContentLayout>
