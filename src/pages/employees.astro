---
import ContentLayout from '../layouts/ContentLayout.astro';

const employees = await Astro.glob('../content/employees/*.md');
---

<ContentLayout title="Employee Directory - Eidolon Capital Intranet">
  <h1>Employee Directory</h1>
  <h2>Active Personnel ({employees.length})</h2>

  <div class="grid">
    {employees.map((employee) => (
      <div class="card">
        <h3>{employee.frontmatter.name}</h3>
        <div class="sunken-panel">
          <table>
            <tbody>
              <tr>
                <td><strong>Position:</strong></td>
                <td>{employee.frontmatter.position}</td>
              </tr>
              <tr>
                <td><strong>Department:</strong></td>
                <td>{employee.frontmatter.department}</td>
              </tr>
              <tr>
                <td><strong>ID:</strong></td>
                <td>{employee.frontmatter.employeeId}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <br>
        <a href={`/employees/${employee.frontmatter.employeeId.toLowerCase()}`}>
          <button>View Profile</button>
        </a>
      </div>
    ))}
  </div>
</ContentLayout>
