---
import { getCollection } from 'astro:content';
import Card from '../components/Card.astro';
import Table from '../components/Table.astro';
import ContentLayout from '../layouts/ContentLayout.astro';

const organizations = await getCollection('organizations');
---

<ContentLayout title="Eidolon Capital Intranet - Organizations">
  <h1>Partner Organizations</h1>

  <div class="grid">
    {organizations.map((org) => (
      <Card title={org.data.name}>
        <Table>
          <tbody>
            <tr>
              <td><strong>Organization ID:</strong></td>
              <td>{org.data.id}</td>
            </tr>
            <tr>
              <td><strong>Type:</strong></td>
              <td>{org.data.type}</td>
            </tr>
            <tr>
              <td><strong>Relationship:</strong></td>
              <td>{org.data.relationship}</td>
            </tr>
            <tr>
              <td><strong>Established:</strong></td>
              <td>{org.data.established}</td>
            </tr>
            <tr>
              <td><strong>Location:</strong></td>
              <td>{org.data.location}</td>
            </tr>
          </tbody>
        </Table>
        <a href={`/organizations/${org.data.id.toUpperCase()}`} slot="bottom">
          <button>View Profile</button>
        </a>
      </Card>
    ))}
  </div>

  <hr>
</ContentLayout>
